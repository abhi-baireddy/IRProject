House pushes through first major gun bill in a generation