The British retreated in 1842 after suffering 4,500 killed, amid massacres that preceded the invention of the roadside bomb.
They gave up their sovereignty over the country in 1919, in another retreat that heralded the beginning of the unwinding of an empire.
That led to the chaos and power vacuums that Bin Laden exploited, and that the United States vowed it would never again allow to fester.
After Bin Laden was hunted down in Pakistan in May 2011, and with Al Qaeda a much-diminished threat, politicians struggled to explain what American troops were fighting to accomplish.
Neither Mr. Obama nor Mr. Trump could make a plausible case that after nearly two decades the United States had much of a role to play other than prop up a weak democracy.