SAN DIEGOâ€”Apple Inc. and Qualcomm Inc. agreed to dismiss all litigation between the two companies world-wide and forged a new license agreement, ending a long-brewing legal battle over how royalties are collected on innovations in smartphone technology.

The settlement, which came hours after opening arguments in a trial between the companies started, includes an undisclosed payment from Apple to Qualcomm. The companies also said in a joint statement that they had reached a six-year license agreement and a multiyear deal for...